.site-main {
	.main-header {
		.offcanvas-close-btn {
			box-shadow: none;
		}

		.offcanva_wrap {
			width: 80%;

			// Mobile menu animations
			&.show {
				transform: translateX(0);
				opacity: 1;
			}

			&.menu-entering {
				animation: menuSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
			}

			&.menu-exiting {
				animation: menuSlideOut 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
			}
		}

		.main-navigation {
			transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
			z-index: 10001;
			padding-top: 12px;
			padding-bottom: 12px;
			transform: translateY(0);
			opacity: 1;

			// Header animation states
			&.header-animate {
				// Initial state
				transform: translateY(0);
				opacity: 1;

				// Initial load animation with clippath
				&.header-initial-load {
					clip-path: circle(0% at 50% 0%);
					opacity: 0;
					transform: translateY(-20px);
					transition: none;

					&::before {
						content: "";
						position: absolute;
						top: 0;
						left: 0;
						right: 0;
						bottom: 0;
						background: linear-gradient(
							135deg,
							rgba(255, 255, 255, 0.15),
							rgba(255, 255, 255, 0.05)
						);
						backdrop-filter: blur(0px);
						-webkit-backdrop-filter: blur(0px);
						border-radius: 0 0 25px 25px;
						opacity: 0;
						clip-path: circle(0% at 50% 0%);
					}
				}

				// Entrance animation
				&.header-entrance {
					clip-path: circle(150% at 50% 0%);
					opacity: 1;
					transform: translateY(0);
					transition: all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);

					&::before {
						opacity: 1;
						transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
					}

					// Animate logo elements
					.navbar-brand,
					.logo-wrap {
						animation: logoEntrance 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s
							both;
					}

					// Animate navigation items
					.navbar-nav .menu-item {
						opacity: 0;
						transform: translateY(20px);
						animation: navItemEntrance 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)
							forwards;

						@for $i from 1 through 10 {
							&:nth-child(#{$i}) {
								animation-delay: #{0.4 + ($i * 0.1)}s;
							}
						}
					}

					// Animate toggle button
					.navbar-toggler {
						animation: buttonEntrance 1s cubic-bezier(0.34, 1.56, 0.64, 1) 0.6s
							both;
					}
				}

				// Coming up animation
				&.header-coming-up {
					opacity: 1;
					animation: headerSlideUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)
						forwards;

					&::before {
						content: "";
						position: absolute;
						top: 0;
						left: 0;
						right: 0;
						bottom: 0;
						background: rgba(255, 255, 255, 0.1);
						backdrop-filter: blur(20px);
						-webkit-backdrop-filter: blur(20px);
						border-radius: 0 0 20px 20px;
						opacity: 0;
						animation: headerBlurIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
					}
				}

				// Going down animation
				&.header-going-down {
					transform: translateY(-100%);
					opacity: 0;
					transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
				}

				// Visible state
				&.header-visible {
					transform: translateY(0);
					opacity: 1;
				}
			}

			@include media-breakpoint-down(md) {
				padding-top: 12px;
				padding-bottom: 12px;
			}

			&.dark {
				.navbar-nav {
					.menu-item {
						.nav-link {
							color: $color-10 !important;

							&::before {
								background-color: $color-10 !important;
							}
						}
					}
				}
				.navbar-toggler-icon {
					background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='rgba(90,87,87,1)'%3E%3Cpath d='M3 4H21V6H3V4ZM9 11H21V13H9V11ZM3 18H21V20H3V18Z'%3E%3C/path%3E%3C/svg%3E") !important;
				}
			}

			&:hover {
				box-shadow: 0 4px 8px #00000033;
			}

			&.scrolled {
				box-shadow: 0 2px 4px #0000001a;
				background-color: $color-1;

				// Middle logo height reduction when scrolled
				.navigation-wrapper {
					.middle_logo {
						padding-left: calc(
							60px + (80 - 60) * ((100vw - 320px) / (1920 - 320))
						);
						padding-right: calc(
							60px + (80 - 60) * ((100vw - 320px) / (1920 - 320))
						);

						img {
							height: calc(40px + (80 - 40) * ((100vw - 320px) / (1920 - 320)));
						}
					}
				}

				.navbar-toggler-icon {
					background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='rgba(90,87,87,1)'%3E%3Cpath d='M3 4H21V6H3V4ZM9 11H21V13H9V11ZM3 18H21V20H3V18Z'%3E%3C/path%3E%3C/svg%3E") !important;
				}

				&:hover {
					box-shadow: 0 4px 8px #00000033;
				}

				.navbar-brand {
					.white_logo {
						display: none;
					}
					.colored_logo {
						display: block;
					}
				}

				.navigation-wrapper {
					.logo-wrap {
						.white_logo {
							display: none;
						}
						.colored_logo {
							display: block;
						}
					}
					.navbar-nav {
						display: flex;
						flex-wrap: wrap;
						align-items: center;
						column-gap: calc(
							20px + (60 - 20) * ((100vw - 320px) / (1920 - 320))
						);

						.menu-item {
							.nav-link {
								color: $color-10;

								&::before {
									background: $color-10;
								}
							}

							.dropdown-menu {
								.menu-item {
									.dropdown-item {
										color: $color-10;
									}
								}
							}
						}
					}
				}

				.contact_btn {
					color: $color-10 !important;
				}
			}

			// Removed navbar-hidden and navbar-visible classes
			// Header animation is now handled by header-coming-up, header-going-down, and header-visible classes

			.container-nav {
				position: relative;
			}

			.logo-wrap {
				.white_logo {
					display: block;
				}
				.colored_logo {
					display: none;
				}
			}

			.navbar-brand {
				.site-logo,
				.custom-logo {
					width: auto;
					height: calc(56px + (82 - 56) * ((100vw - 320px) / (1920 - 320)));
					z-index: 80;
				}

				.white_logo {
					display: block;
				}
				.colored_logo {
					display: none;
				}
			}

			.mb-logo-wrap {
				.mb-menu-logo {
					width: calc(100px + (160 - 100) * ((100vw - 320px) / (1920 - 320)));
					height: 50px;
					object-fit: contain;

					@include media-breakpoint-down(md) {
						width: auto;
						height: calc(56px + (62 - 56) * ((100vw - 320px) / (1920 - 320)));
					}
				}
			}

			// Style nav menu
			.menu-button {
				padding: 0;
				&:focus,
				&:focus-visible {
					box-shadow: none;
					outline: 0;
				}

				@include media-breakpoint-down(lg) {
					display: block !important;
					z-index: 10002;
				}

				.navbar-toggler-icon {
					background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='rgba(255,255,255,1)'%3E%3Cpath d='M3 4H21V6H3V4ZM9 11H21V13H9V11ZM3 18H21V20H3V18Z'%3E%3C/path%3E%3C/svg%3E");
				}

				@include media-breakpoint-down(md) {
					svg {
						path {
							fill: $color-9;
						}
					}
				}
			}
			.navigation-wrapper {
				@include media-breakpoint-down(md) {
					margin-right: 0 !important;
				}

				@include media-breakpoint-up(md) {
					display: grid;
					grid-template-columns: 1fr 1fr 1fr;
				}

				// Style middle logo
				.middle_logo {
					padding-left: calc(
						80px + (106 - 80) * ((100vw - 320px) / (1920 - 320))
					);
					padding-right: calc(
						80px + (106 - 80) * ((100vw - 320px) / (1920 - 320))
					);
					transition: padding 0.6s cubic-bezier(0.4, 0, 0.2, 1);

					img {
						width: auto;
						height: calc(54px + (124 - 54) * ((100vw - 320px) / (1920 - 320)));
						object-fit: contain;
						transition: height 0.6s cubic-bezier(0.4, 0, 0.2, 1);
					}
				}
				.navbar-nav {
					display: flex;
					flex-wrap: wrap;
					align-items: center;
					column-gap: calc(20px + (60 - 20) * ((100vw - 320px) / (1920 - 320)));

					&.left-menu {
						justify-content: flex-end;
					}
					&.right-menu {
						justify-content: flex-start;
					}

					@include media-breakpoint-down(md) {
						justify-content: flex-start;
						align-items: flex-start;
						row-gap: 0;
						text-align: left;
					}

					.menu-item {
						border-bottom: 1px solid #f8f8f800;

						@include media-breakpoint-down(md) {
							padding-bottom: 15px;
						}

						&:last-child {
							border-bottom: none;
						}
						&.active {
							.nav-link {
								&::before {
									transform: scaleX(1);
									opacity: 1;
								}
							}
						}

						.nav-link {
							position: relative;
							padding: 0;
							color: $color-9;
							text-decoration: none;
							font-size: calc(
								12px + (15 - 12) * ((100vw - 320px) / (1920 - 320))
							);
							text-transform: uppercase;
							color: $color-9;

							@include media-breakpoint-down(md) {
								color: $color-10;
								text-align: left;
							}

							@media (hover: hover) {
								&::before {
									background-color: transparent;
								}
							}

							&::before {
								content: "";
								position: absolute;
								transition: transform 0.5s ease;
								left: 0;
								bottom: 0;
								width: 100%;
								height: 1px;
								background: $color-9;
								transform: scaleX(0);

								@include media-breakpoint-down(md) {
									display: none;
								}
							}
							&:hover:before {
								transform: scaleX(1);
								opacity: 1;
							}
						}

						.dropdown-menu {
							background-color: $color-3;
							box-shadow: 0 4px 8px #0000001a;
							border-radius: 8px;
							border-color: $color-3;
							transition: all 0.3s;

							&:hover {
								box-shadow: 0 8px 16px #00000033;
							}

							.menu-item {
								.dropdown-item {
									color: $color-9;
									transition: all 0.3s;
									font-size: calc(
										14px + (16 - 14) * ((100vw - 320px) / (1920 - 320))
									);

									@include media-breakpoint-up(md) {
										min-width: 300px;
									}

									&:hover {
										background-color: transparent;
										opacity: 0.6;
									}
									&:focus {
										background-color: transparent;
										opacity: 0.6;
									}

									span {
										white-space: break-spaces;
									}
								}
							}
						}
					}
				}

				.action_wrapper {
					display: flex;
					align-items: center;
					padding-left: 12px;

					@include media-breakpoint-down(md) {
						padding-left: 0px;
						justify-content: center;
					}

					.contact_btn {
						text-decoration: none;
						padding: 0;
						color: $color-9;
						text-decoration: none;
						font-size: calc(
							14px + (16 - 14) * ((100vw - 320px) / (1920 - 320))
						);
						font-weight: 400;

						@include media-breakpoint-down(md) {
							color: $color-10;
						}
					}
				}
			}

			// Modern Mobile Menu Styles
			@include media-breakpoint-down(lg) {
				// Basic mobile menu styling that works with Bootstrap
				.offcanvas {
					// Ensure menu items are visible
					.navbar-nav {
						.menu-item {
							.nav-link {
								color: #333 !important;
								font-size: 16px;
								padding: 15px 0;
								border-bottom: 1px solid rgba(0, 0, 0, 0.05);

								&:hover {
									color: #666 !important;
								}
							}

							&:last-child .nav-link {
								border-bottom: none;
							}
						}
					}

					// Hide middle logo on mobile
					.middle_logo {
						display: none !important;
					}
				}

				// Modern hamburger styles
				.navbar-toggler {
					border: none;
					padding: 8px;
					width: 44px;
					height: 44px;
					display: flex;
					align-items: center;
					justify-content: center;
					z-index: 10002;
					background: rgba(255, 255, 255, 0.1);
					border-radius: 8px;
					backdrop-filter: blur(10px);
					-webkit-backdrop-filter: blur(10px);
					transition: all 0.3s ease;

					&:hover {
						background: rgba(255, 255, 255, 0.2);
						transform: scale(1.05);
					}

					&:focus {
						box-shadow: none;
						outline: none;
					}

					.navbar-toggler-icon {
						position: relative;
						width: 24px;
						height: 18px;
						display: flex;
						flex-direction: column;
						justify-content: space-between;
						background: none;

						.hamburger-line {
							display: block;
							height: 2px;
							background-color: #ffffff;
							border-radius: 1px;
							transition: all 0.3s ease;

							&.hamburger-line-1 {
								width: 100%;
							}

							&.hamburger-line-2 {
								width: 80%;
								margin-left: auto;
							}

							&.hamburger-line-3 {
								width: 100%;
							}
						}
					}

					// Change hamburger color when scrolled
					.main-navigation.scrolled & {
						.navbar-toggler-icon .hamburger-line {
							background-color: #333333;
						}
					}

					// Change hamburger color for dark header
					.main-navigation.dark & {
						.navbar-toggler-icon .hamburger-line {
							background-color: #333333;
						}
					}
				}
			}
		}
	}
}

// Modern Mobile Menu Overlay Styles
.modern-mobile-menu {
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
	z-index: 10000;
	display: none;
	flex-direction: column;
	clip-path: circle(0% at top right);

	// Backdrop blur effect for modern browsers
	backdrop-filter: blur(20px);
	-webkit-backdrop-filter: blur(20px);

	// Add subtle overlay pattern
	&::before {
		content: "";
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: radial-gradient(
				circle at 20% 80%,
				rgba(255, 255, 255, 0.02) 0%,
				transparent 50%
			),
			radial-gradient(
				circle at 80% 20%,
				rgba(255, 255, 255, 0.02) 0%,
				transparent 50%
			);
		pointer-events: none;
	}

	.modern-menu-content {
		height: 100%;
		display: flex;
		flex-direction: column;
		padding: 24px;
		overflow-y: auto;
	}

	.modern-menu-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 60px;
		padding-bottom: 20px;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);

		.mb-logo-wrap {
			img {
				height: 50px;
				width: auto;
				filter: brightness(1);
			}
		}

		.modern-menu-close {
			position: relative;
			background: none;
			border: none;
			padding: 12px;
			cursor: pointer;
			width: 44px;
			height: 44px;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 50%;
			transition: all 0.3s ease;

			&:hover {
				background: rgba(255, 255, 255, 0.1);
				transform: rotate(90deg);
			}

			.close-line {
				position: absolute;
				width: 20px;
				height: 2px;
				background-color: #ffffff;
				border-radius: 1px;
				transition: all 0.3s ease;

				&.close-line-1 {
					transform: rotate(45deg);
				}

				&.close-line-2 {
					transform: rotate(-45deg);
				}
			}
		}
	}

	.modern-menu-nav {
		ul {
			list-style: none;
			padding: 0;
			margin: 0;

			&.modern-menu-primary {
				margin-bottom: 40px;
			}

			&.modern-menu-secondary {
				padding-top: 20px;
				border-top: 1px solid rgba(255, 255, 255, 0.1);
			}
		}

		.modern-menu-item {
			margin-bottom: 8px;
			overflow: hidden;

			&:last-child {
				margin-bottom: 0;
			}

			&:not(.secondary) {
				margin-bottom: 16px;
			}

			.modern-menu-link {
				display: flex;
				align-items: center;
				justify-content: space-between;
				padding: 16px 0;
				text-decoration: none;
				color: #ffffff;
				font-size: calc(24px + (32 - 24) * ((100vw - 320px) / (1920 - 320)));
				font-weight: 300;
				letter-spacing: 0.5px;
				transition: all 0.4s ease;
				position: relative;
				text-transform: uppercase;

				&::before {
					content: "";
					position: absolute;
					bottom: 0;
					left: 0;
					width: 0;
					height: 1px;
					background: linear-gradient(90deg, #ffffff, transparent);
					transition: width 0.4s ease;
				}

				&:hover {
					color: #ffffff;

					&::before {
						width: 100%;
					}
				}

				.menu-text {
					flex: 1;
					transition: transform 0.3s ease;
				}

				.menu-arrow {
					opacity: 0.7;
					font-size: calc(20px + (24 - 20) * ((100vw - 320px) / (1920 - 320)));
					transition: all 0.3s ease;
					transform: translateX(-10px);
				}
			}

			// Active menu item styles
			&.active {
				.modern-menu-link {
					color: #ffffff;

					&::before {
						width: 100%;
					}
				}
			}
		}
	}

	// Responsive adjustments
	@include media-breakpoint-down(sm) {
		.modern-menu-content {
			padding: 20px;
		}

		.modern-menu-header {
			margin-bottom: 40px;
		}

		.modern-menu-nav {
			.modern-menu-item {
				.modern-menu-link {
					font-size: calc(20px + (24 - 20) * ((100vw - 320px) / (768 - 320)));
					padding: 14px 0;
				}
			}
		}
	}
}

// Body styles when mobile menu is open
body.mobile-menu-open {
	overflow: hidden;

	// Slightly blur the background content
	.site-main > *:not(.modern-mobile-menu) {
		filter: blur(2px);
		transition: filter 0.3s ease;
	}
}

// Performance optimizations
@media (prefers-reduced-motion: reduce) {
	.modern-mobile-menu,
	.modern-mobile-menu * {
		transition: none !important;
		animation: none !important;
	}
}

// Mobile Menu Animations
@keyframes menuSlideIn {
	0% {
		transform: translateX(100%);
		opacity: 0;
	}
	100% {
		transform: translateX(0);
		opacity: 1;
	}
}

@keyframes menuSlideOut {
	0% {
		transform: translateX(0);
		opacity: 1;
	}
	100% {
		transform: translateX(100%);
		opacity: 0;
	}
}

// Mobile menu item entrance animations
@keyframes menuItemFadeIn {
	0% {
		opacity: 0;
		transform: translateX(20px);
	}
	100% {
		opacity: 1;
		transform: translateX(0);
	}
}

// Ensure mobile menu items are visible
@media (max-width: 991.98px) {
	.offcanvas.show {
		.navbar-nav {
			.menu-item {
				opacity: 0;
				animation: menuItemFadeIn 0.4s ease forwards;

				@for $i from 1 through 10 {
					&:nth-child(#{$i}) {
						animation-delay: #{0.1 * $i}s;
					}
				}
			}
		}
	}
}

// Header Animation Keyframes

// Initial Load Animations
@keyframes logoEntrance {
	0% {
		opacity: 0;
		transform: scale(0.8) translateY(-30px);
		filter: blur(10px);
	}
	50% {
		transform: scale(1.1) translateY(-5px);
		filter: blur(2px);
	}
	100% {
		opacity: 1;
		transform: scale(1) translateY(0);
		filter: blur(0px);
	}
}

@keyframes navItemEntrance {
	0% {
		opacity: 0;
		transform: translateY(20px) scale(0.9);
	}
	50% {
		transform: translateY(-5px) scale(1.05);
	}
	100% {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
}

@keyframes buttonEntrance {
	0% {
		opacity: 0;
		transform: scale(0) rotate(-180deg);
	}
	50% {
		transform: scale(1.2) rotate(-90deg);
	}
	100% {
		opacity: 1;
		transform: scale(1) rotate(0deg);
	}
}

@keyframes headerSlideUp {
	0% {
		transform: translateY(-100%);
		opacity: 0;
	}
	20% {
		transform: translateY(-20%);
		opacity: 0.3;
	}
	60% {
		transform: translateY(-5%);
		opacity: 0.9;
	}
	100% {
		transform: translateY(0);
		opacity: 1;
	}
}

@keyframes headerBlurIn {
	0% {
		opacity: 0;
		backdrop-filter: blur(0px);
		-webkit-backdrop-filter: blur(0px);
	}
	50% {
		opacity: 0.5;
		backdrop-filter: blur(10px);
		-webkit-backdrop-filter: blur(10px);
	}
	100% {
		opacity: 1;
		backdrop-filter: blur(20px);
		-webkit-backdrop-filter: blur(20px);
	}
}

@keyframes headerLineExpand {
	0% {
		width: 0;
		opacity: 0;
	}
	50% {
		width: 60%;
		opacity: 0.8;
	}
	100% {
		width: 100%;
		opacity: 1;
	}
}

// Enhanced hover effects for header elements
.main-navigation.header-animate {
	.navbar-brand,
	.logo-wrap,
	.navbar-nav .menu-item .nav-link {
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

		&:hover {
			transform: translateY(-2px);
			filter: brightness(1.1);
		}
	}

	// Logo glow effect when header is visible
	&.header-visible {
		.navbar-brand img,
		.logo-wrap img {
			filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
			transition: filter 0.3s ease;
		}
	}
}
